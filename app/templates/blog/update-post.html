{% extends "layout/internal.html" %}

{% block navigation %}
    {% if is_editing %}
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <a class="btn btn-danger"
               href="{{ uri_for(blog_routes.ROUTE_DELETE_POST, post_id=post.key.id()) }}">Delete Post</a>
        </div>
    </nav>
    {% endif %}
{% endblock %}

{% block main_content %}
<div id="new-post" class="container-fluid">
    <div class='row'>
        <div class='col-xs-12 col-sm-11 col-md-10'>
            <form method="post" class="form-horizontal">
              <h1 class="col-sm-offset-2">
                {% if is_editing %} Edit Post {% else %} New Post {% endif %}
              </h1>

              {% if error %}
                <p class='col-sm-offset-2 error text-danger'>{{error}}</p>
              {% endif %}
              <div class="form-group">
                <label for="post-subject" class="col-sm-2 control-label">Subject</label>
                <div class="col-sm-10">
                  <input type="text"
                         class="form-control"
                         name="subject"
                         id="post-subject"
                         placeholder="Subject"
                         value="{{post.subject}}">
                </div>
              </div>
              <div class="form-group">
                <label for="post-body" class="col-sm-2 control-label">Content</label>
                <div class="col-sm-10">
                    <textarea id="post-body"
                              class="form-control"
                              name="content">{{post.content}}</textarea>
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                  <button type="submit" class="btn btn-primary">Submit</button>
                  {% if is_editing %}
                  <a type="button"
                     class="btn btn-default"
                     href="{{ uri_for(blog_routes.ROUTE_VIEW_POST, post_id=post.key.id()) }}">Cancel</a>
                  {% else %}
                  <a type="button"
                     class="btn btn-default"
                     href="{{ uri_for(blog_routes.ROUTE_INDEX) }}">Cancel</a>
                  {% endif %}
                </div>
              </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
